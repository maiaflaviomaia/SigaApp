@model Paginacao<SigaApp.Models.Entidades.Lancamento>

@section styles{
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" />
}

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">DRE - Demonstração do Resultado do Exercício</div>
            <div class="panel-body">
                @{
                    if (TempData["Mensagem"] != null)
                    {
                        <div class="text-danger">
                            <p>ERRO: @TempData["Mensagem"]</p>
                        </div>
                    }
                }

                <form asp-action="GerarDRE" class="mb-5">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <div class="row">
                        <div class="col-md-2">
                            <label class="control-label">Mês</label>
                            <select class="form-control" name="txtMes">
                                <option value="">-- Selecione --</option>
                                <option value="0">Todos</option>
                                <option value="1">Janeiro</option>
                                <option value="2">Fevereiro</option>
                                <option value="3">Março</option>
                                <option value="4">Abril</option>
                                <option value="5">Maio</option>
                                <option value="6">Junho</option>
                                <option value="7">Julho</option>
                                <option value="8">Agosto</option>
                                <option value="9">Setembro</option>
                                <option value="10">Outubro</option>
                                <option value="11">Novembro</option>
                                <option value="12">Dezembro</option>
                            </select>
                        </div>

                        <div class="col-md-1">
                            <input type="submit" value="Gerar" class="btn btn-info btn-sm btn-block" style="margin-top:23px" />
                        </div>
                    </div>
                </form>

                @*@if (Model.Count >= 1)
                {*@
                    <div class="mb-3" style="margin-top:-35px; float:right">
                        <a asp-action="GerarExcel" class="btn btn-sm btn-success">Gerar Excel</a>
                    </div>

                    <table id="ItemsTable" class="table table-sm table-hover mt-2">
                        <thead>
                            <tr>
                                <th class="text-center">Categoria</th>
                                <th class="text-center">Valor</th>
                                <th></th>
                            </tr>
                        </thead>
                    </table>
                @*}
                else
                {
                    <p class="mt-4">Não há dados para serem exibidos</p>
                }*@
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#ItemsTable").DataTable({
                "processing": false,
                "serverSide": true,
                "ajax": {
                    "url": "/Lancamentos/GerarDRE",
                    "type": "POST",
                    "datatype": "json"
                },
                "columns": [
                    { "data": "categoriaNome" },
                    { "data": "valorCategoria" }
                ],
                "ordering": true,
                "paging": true,
                "pagingType": "full_numbers",
                "pageLength": 10
            });
        });

        //(function ($) {
        //    var generateCostumerTable = $("#ItemsTable")
        //        .dataTable({
        //            "processing": false,
        //            "serverSide": true,
        //            "ajax": {
        //                "url": "/Lancamentos/GerarDRE",
        //                "type": "POST",
        //                "contentType":"application/json",
        //                "datatype": "json"
        //            },
        //            "columns": [
        //                { "data": "categoriaNome" },
        //                { "data": "valorCategoria" }
        //            ],
        //            "ordering": true,
        //            "paging": true,
        //            "pagingType": "full_numbers",
        //            "pageLength": 10
        //        });
        //})(jQuery);
    </script>
}
